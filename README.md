# Reproducible Workflows for Genomics Research

This repository contains file descriptions for common bioinformatics tools and workflows.
These workflows have been developed and used by the Biostatistics and Computational Laboratory (BCBLab).
Descriptions of tools and workflows were written using reproducible languages for reproducible research:
Common Workflow Language (CWL) and Workflow Description Language (WDL).
Newest versions are mainly written in WDL.

## Tools

Dockerfiles and CWL/WDL files for tools are in `tools` directory.
Each subdirectory for one tool.
Inside each subdirectory there are many directories representing tool version.
The version must be equal to tool version downloaded by Dockerfile.
Dockerfiles are tagged according to tool version.
Each version must have its own Dockerfile and CWL/WDL files.
CWL/WDL must use the right version of Docker image according to tool version.

| Tool          | Versions | Description |
| ------------- | -------- | ----------- |
| bcl2fastq     | 1.8.4, 2.20.0 | Demultiplexes data and converts BCL files generated by Illumina sequencing systems to standard FASTQ file formats |
| Bioconductor  | 3.6, 3.7 | Provides tools for the analysis and comprehension of high- throughput genomic data |
| Bismark       | 0.14.5, 0.19.0 | Maps bisulfite treated sequencing reads to a genome of interest and perform methylation calls in a single step |
| Bowtie        | 1.2.0, 1.2.2 | An ultrafast, memory-efficient short read aligner |
| BWA           | 0.7.15, | Burrows-Wheeler Aligner |
| Cutadapt      | 1.13, 1.16 | Removes adapter sequences from sequencing reads |
| FastQC        | 0.11.6, 0.11.7, 0.11.8 | A quality control tool for high throughput sequence data |
| GATK          | 3.6-0 | Genome Analysis Toolkit - Variant Discovery in High-Throughput Sequencing Data |
| HTSeq count   | 0.9.1 | Counting reads in features |
| Reaper        | 13-274 | Program for demultiplexing, trimming and filtering short read sequencing data |
| Picard        | 2.6.0 | A set of command line tools for manipulating high-throughput sequencing data | 
| R             | 3.4.2, 3.5.0 | Language and environment for statistical computing and graphics |
| Rqc           | 1.14.0 | Quality Control Tool for High-Throughput Sequencing Data |
| Samtools      | 1.5 | Reading/writing/editing/indexing/viewing SAM/BAM/CRAM format |
| STAR          | 2.5.3a | RNA-seq aligner |
| featureCounts | 1.5.2, 1.6.2 | Counting reads to genomic features such as genes, exons, promoters and genomic bins |
| TrimGalore!   | 0.4.4, 0.4.5, 0.5.0 | A wrapper tool around Cutadapt and FastQC to consistently apply quality and adapter trimming to FastQ files, with some extra functionality for MspI-digested RRBS-type libraries |


## Workflows

Workflows import tool descriptions allowing reuse of these files.

| Workflow  | Versions | Description |
| --------- | -------- | ------------|
| miRNA-seq | 1.0, 1.1 | Quantification of known microRNAs from NGS data |
| QA        | 1.0, 1.1 | Quality assessment of NGS data |
| RNA-seq   | 1.0      | Quantification of known genes from NGS data |
| WGBS      | 1.0, 1.1 | Quantification of CpG methylation from NGS data |

## Build  Docker images and push to DockerHub

The command below builds and pushes Docker images to DockerHub.
Images are tagged with tool versions.

```bash
bash build_images.sh
```

## Generate inputs files

Generating input files make WOMTOOL to validate WDL workflow and tools files.

```bash
bash generate_inputs.sh
```

## Changelog

- May 30, 2019
  - WGBS workflow version 1.2.0
    - Removed index genome task
- May 29, 2019
  - RNA-seq workflow version 1.2.0
    - Removed index genome task
- May 28, 2019
  - Small RNA-seq workflow version 1.2.0
    - Removed index genome task
- February 20, 2019
  - Fixed Dockerfile for Cutadapt versions 1.13, 1.16
  - Added Dockerfile for R version version 3.5.2
  - Added Dockerfile for Bioconductor version 3.8
  - Added Dockerfile and WDL for FastQC version 1.11.8
  - Added Dockerfile and WDL for Rqc version 1.16.2
    - Added parameter pair for paired-end files
  - Updated QA workflow to version 1.1
    - Using FastQC version 1.11.8
    - Using Rqc version 1.16.8
  - Added CountMultipleFiles task for HTSeq-count
  - Added WDL for RNAseq workflow version 1.1
    - This version outputs a single counts file (instead of one file per sample)